<!DOCTYPE html>
<html>
<head>
  <title>Foo Contract</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
  <!-- <script src="node_modules/web3/dist/web3.js"></script> -->
  <script src="node_modules/web3/dist/web3.min.js"></script>
</head>
<body>
  <div class="container">
    
    <div class="row">
    <div class="col col-md-6 col-md-offset-3">
    
    <form>
      <div class="form-group">
        <label for="inp1">Input to Foo Contract:</label>
        <input type="text" class="form-control" id="inp1" placeholder="Type something">
      </div>
      <button id="btn1" type="submit" class="btn btn-info">Submit</button>
    </form>

    <p>&nbsp;</p>

    <label>Input in hex format:</label>
    <pre id="out1"></pre>
    <label>Input converted to string:</label>
    <pre id="out2"></pre>

    <div class="panel panel-default">
      <div class="panel-body" id="pb1">
      </div>
    </div>

    </div> <!-- col -->
    </div> <!-- row -->
  </div> <!-- container -->

<script>
var cl = console.log;
var web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
var foo;

// Create contract from ABI:
var browser_foo_sol_fooContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"getFoo","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_foo","type":"bytes32"}],"name":"setFoo","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]);

function info(str){
  $("#pb1").text(str);
};

// Deploy contract to blockchain and get its instance.
// Code generated by remix IDE after compile:
var browser_foo_sol_foo = browser_foo_sol_fooContract.new(
   {
     from: web3.eth.accounts[0], 
     data: '0x60606040527f796f206d61746521000000000000000000000000000000000000000000000000600090600019169055341561003957600080fd5b5b60de806100486000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063243dc8da1460475780633577a26b146075575b600080fd5b3415605157600080fd5b60576099565b60405180826000191660001916815260200191505060405180910390f35b3415607f57600080fd5b609760048080356000191690602001909190505060a3565b005b6000805490505b90565b80600081600019169055505b505600a165627a7a7230582023a69ac2e9c862781dc567e2fa0239ad37348e182263f2a474061f7d2b7069490029', 
     gas: '1000000'
   }, function (e, contract){
    // console.log(e, contract);
    foo = contract;
    if (typeof contract.address !== 'undefined') {
      info('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
    }
 });


function setFoo(str){
  var _str = str || " [ EMPTY INPUT ] ";
  foo.setFoo.sendTransaction(web3.fromAscii(_str), {
      from: web3.eth.accounts[0]
    }, 
    function(err, txHash) {
    if (err != null) {
     info("Error while sending transaction: " + err);
    } else {
     info("Transaction sent, here's your txHash: " + txHash);
    }
  });
}; // setFoo

var inp1 = document.getElementById("inp1"), btn1 = document.getElementById("btn1")
  , out1 = document.getElementById("out1"), out2 = document.getElementById("out2");

$(btn1).click(function(e){
  e.preventDefault();
  setFoo(inp1.value);
  out1.innerHTML = foo.getFoo();
  out2.innerHTML = web3.toAscii(foo.getFoo());
});

</script>
</body>
</html>